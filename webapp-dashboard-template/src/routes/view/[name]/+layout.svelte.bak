<script>
  import { page } from '$app/stores';
	import { onMount } from 'svelte';

  const libRelativePath = `../../../lib/openv0_generated`
  const name = $page.params.name;

  let metadata;
	let LoadedComponents;
	onMount(async () => {
    const response = await fetch(
			`http://localhost:3000/components/get?framework=svelte&components=shadcn&icons=lucide&name=${name}`
		);
		const data = await response.json();
		metadata = data.items
    // const metadata = (await import(`${libRelativePath}/${componentId}/metadata.json`)).default;
    // console.log({metadata})
		// LoadedComponent = (await import(`${libRelativePath}/${componentId}/${metadata.versions[0]}.svelte`)).default;
    LoadedComponents = await Promise.all(
      metadata.map( async (entry) => {
        return (await import(`${libRelativePath}/${entry.name}/${entry.name}_${entry.version}.svelte`)).default;
      })
    )
	});
</script>

viewing something


{#if LoadedComponents}
<svelte:component this={LoadedComponents[0]} >
</svelte:component>
{:else}
  <p>loading</p>
{/if}
